import{t as E,v as O,w as U,e as X,b as z,u as K,r as s,j as n,a as t,L as Q,H as h,c as w,d as y,x as D,y as Y}from"./index-36e37283.js";const G=E("CarBookingDetails",async(d,{rejectWithValue:o})=>{const i="https://priceline-com-provider.p.rapidapi.com/v2/cars/resultsRequest",l={headers:{"X-RapidAPI-Key":"ed49e734e9msh3e251df7e7eba83p121b11jsn40323084e369","X-RapidAPI-Host":"priceline-com-provider.p.rapidapi.com"},params:d};try{const{data:c}=await O.get(i,l);return c}catch(c){return console.error(c),o(c)}});U({name:"carRentalLocations",initialState:{data:[],status:"idle",error:null},reducers:{},extraReducers:d=>{d.addCase(fetchCarLocation.pending,o=>{o.status="loading"}).addCase(fetchCarLocation.fulfilled,(o,i)=>{o.status="succeeded",o.data=i.payload,o.error=null}).addCase(fetchCarLocation.rejected,(o,i)=>{o.status="failed",o.error=i.error.message})}});const W=()=>{const d=X(),o=z(),i=K(e=>e.carRentalLocations),[l,c]=s.useState({cityString:"",airportCode:""}),[R,v]=s.useState(!1),[u,T]=s.useState(),[f,I]=s.useState(),[p,j]=s.useState(),[g,F]=s.useState(),[m,k]=s.useState({cityString:"",airportCode:""}),[x,H]=s.useState(!1),[b,N]=s.useState({pickup:!1,return:!1}),[P,S]=s.useState(!1),_=()=>{v(!0),setTimeout(()=>{v(!1)},5e3)},$=e=>{e.preventDefault(),A()?(M(),_()):S(!0)},A=()=>!!(l&&u&&f&&p&&g),B=(e,a)=>{const r=e.target.value;a==="pickup"?(c(r),o(D(l))):a==="return"&&(k(r),o(D(m)))},L=e=>{const a=e.getDate(),r=e.getMonth()+1,q=e.getFullYear();return`${r<10?"0"+r:r}/${a<10?"0"+a:a}/${q}`},C=e=>{const a=e.getHours(),r=e.getMinutes();return`${a<10?"0"+a:a}:${r<10?"0"+r:r}`},M=async()=>{const e={pickup_date:L(u),pickup_time:C(f),pickup_airport_code:l.airportCode||"",pickup_city_string:l.cityString||"",dropoff_date:L(p),dropoff_time:C(g)};x&&(m.airportCode,m.cityString);try{const a=await o(G(e));o(Y(a)),d("/car-search")}catch(a){console.error(a)}};return n("form",{onSubmit:$,className:`relative mx-4 xl:w-1/2  rounded-lg border border-gray   bg-black bg-opacity-60 shadow-black shadow-lg
      ${R?"border-t-4 border-blue-600 animate-pulse":""}`,children:[t("div",{className:"relative bg-white bg-opacity-0",children:P&&n("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[t("strong",{className:"font-bold",children:"Error:"}),t("span",{className:"ml-1 block sm:inline",children:"Please fill in all the required fields before searching."}),t("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>S(!1),children:n("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[t("title",{children:"Close"}),t("path",{fillRule:"evenodd",d:"M14.348 5.652a.5.5 0 0 1 0 .707L10.707 10l3.641 3.641a.5.5 0 1 1-.707.707L10 10.707l-3.641 3.641a.5.5 0 1 1-.707-.707L9.293 10 5.652 6.359a.5.5 0 0 1 .707-.707L10 9.293l3.641-3.641a.5.5 0 0 1 .707 0z"})]})})]})}),n("section",{className:"flex flex-col lg:flex-row justify-center gap-4 mx-6 lg:mx-4 mb-4",children:[t(Q,{renderReturnLocationInput:x,pickupLocation:l,returnLocation:m,selectedLocation:b,fetchCarRentalLocation:B,handleLocationSelection:(e,a,r)=>{e==="pickup"?(c({cityString:a,airportCode:r}),N({...b,pickup:!0})):e==="return"&&(k({cityString:a,airportCode:r}),N({...b,return:!0}))},carLocations:i}),n("div",{className:"flex flex-col ",children:[t("label",{className:"font-bold text-sm lg:text-lg lg:pt-4 mb-2 text-white text-shadow-lg font-roboto",children:"Pick-Up Date:"}),t(h,{name:"pickupDate",minDate:new Date,selected:u,onChange:e=>T(e),className:"border rounded-md h-10 focus:ring-2 focus:ring-blue-600 focus:border-transparent shadow-inner focus:shadow outline-none w-full max-w-xs px-2"})]}),n("div",{className:"flex flex-col ",children:[t("label",{className:"font-bold text-sm lg:text-lg lg:pt-4 mb-2 text-white text-shadow-lg font-roboto",children:"Pick-Up Time:"}),t(h,{selected:f,onChange:e=>I(e),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,timeCaption:"Time",dateFormat:"h:mm aa",minTime:new Date(new Date().setHours(9,0)),maxTime:new Date(new Date().setHours(17,0)),className:"border rounded-md h-10 focus:ring-2 focus:ring-blue-600 focus:border-transparent shadow-inner focus:shadow outline-none w-full max-w-xs px-2"})]}),n("div",{className:"flex flex-col ",children:[t("label",{className:"font-bold text-sm lg:text-lg lg:pt-4 mb-2 text-white text-shadow-lg font-roboto",children:"Return Date:"}),t(h,{selected:p,minDate:u,onChange:e=>j(e),className:"border rounded-md h-10 focus:ring-2 focus:ring-blue-600 focus:border-transparent shadow-inner focus:shadow outline-none w-full max-w-xs px-2"})]}),n("div",{className:"flex flex-col ",children:[t("label",{className:"font-bold text-sm lg:text-lg lg:pt-4 mb-2 text-white text-shadow-lg font-roboto",children:"Return Time:"}),t(h,{selected:g,onChange:e=>F(e),showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa",minTime:new Date(new Date().setHours(9,0)),maxTime:new Date(new Date().setHours(17,0)),className:"border rounded-md h-10 focus:ring-2 focus:ring-blue-600 focus:border-transparent shadow-inner focus:shadow outline-none w-full max-w-xs px-2"})]})]}),n("section",{className:"flex justify-start lg:justify-evenly",children:[n("div",{className:"mx-7 xl:mr-0 my-2",children:[t("input",{type:"checkbox",id:"differentReturnLocation",checked:x,className:"rounded-md focus:ring-2 focus:ring-blue-600 focus:border-transparent shadow-inner focus:shadow outline-none h-5 w-5 mr-2",onChange:e=>H(e.target.checked)}),t("label",{htmlFor:"differentReturnLocation",className:"font-bold text-xs text-white text-shadow-lg font-roboto",children:"Returning in a different location?"}),n("div",{children:[t("input",{type:"checkbox",className:"rounded-md focus:ring-2 focus:ring-blue-600 focus:border-transparent shadow-inner focus:shadow outline-none h-5 w-5 mr-2"}),t("label",{htmlFor:"differentReturnLocation",className:"font-bold text-xs text-white text-shadow-lg font-roboto",children:"Driver aged between 25-75"})]})]}),t("button",{type:"submit",className:"group mb-4 ml-6 lg:ml-0 bg-light-blue hover:bg-opacity-5 text-white font-bold px-2 rounded shadow-md transition duration-200 ease-in-out  my-4",children:n("div",{className:"flex",children:[t(w,{icon:y,className:"text-xl text-white group-hover:text-light-blue transition-colors duration-200 ease-in-out delay-100"}),t(w,{icon:y,className:"text-xl text-white group-hover:text-light-blue transition-colors duration-200 ease-in-out delay-200"}),t(w,{icon:y,className:"text-xl text-white group-hover:text-light-blue transition-colors duration-200 ease-in-out delay-300"})]})})]})]})};export{W as default};
